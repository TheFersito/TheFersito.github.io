<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Mensaje</title>
  <link rel="stylesheet" type="text/css" href="//undertalefonts.duodecima.technology/webfonts/stylesheet.css">
  <style>
    body {
	margin: 0;
	background-color: black;
	color: white;
	font-family: 'Determination Mono', 'Determination Mono', cursive;
	}
	display: flex;
	justify-content: center;
	align-items: center;
	height: 100vh;
	user-select: none;
    }
    .caja-texto {
      border: 4px solid white;
      padding: 20px;
      width: 80%;
      max-width: 600px;
      font-size: 1.2em;
      box-sizing: border-box;
      background-color: black;
      white-space: pre-wrap;
    }
    .cursor {
      display: inline-block;
      width: 10px;
      background-color: white;
      margin-left: 3px;
      animation: parpadeo 1s infinite;
    }
    @keyframes parpadeo {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }
  </style>
</head>
<body>
  <div class="caja-texto" id="cajaTexto"></div>

<audio id="typeSound" src="sonidos/snd_txt1.mp3" preload="auto"></audio>

<script>
    const mensajes = [
      "Hola, humano.\nTe he estado esperando aquí.",
      "Sabía que vendrías algún día.",
      "Recuerda siempre ser tú mismo.",
      "Nos vemos pronto..."
    ];

    let mensajeIndex = 0;
    let charIndex = 0;
    const caja = document.getElementById('cajaTexto');
    const typeSound = document.getElementById('typeSound');
    let escribiendo = false;

    function escribirMensaje() {
      escribiendo = true;
      const texto = mensajes[mensajeIndex];
      if (charIndex < texto.length) {
        caja.innerHTML = texto.substring(0, charIndex+1) + '<span class="cursor"></span>';
        if (texto[charIndex] !== " " && texto[charIndex] !== "\n") {
          typeSound.currentTime = 0;
          typeSound.play();
        }
        charIndex++;
        setTimeout(escribirMensaje, 50);
      } else {
        caja.innerHTML = texto; // quitar cursor al terminar
        escribiendo = false;
      }
    }

    function siguienteMensaje() {
      if (escribiendo) return; // si está escribiendo, no pasar
      mensajeIndex++;
      if (mensajeIndex >= mensajes.length) {
        mensajeIndex = 0; // reinicia o puedes poner return para finalizar
      }
      charIndex = 0;
      escribirMensaje();
    }

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        siguienteMensaje();
      }
    });

    document.addEventListener('click', () => {
      siguienteMensaje();
    });

    escribirMensaje();
  </script>
</body>
</html>
